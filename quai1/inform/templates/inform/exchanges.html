{% extends 'calendrier/base.html' %}

{% block content %}

{% if not gifts and not accepted and not ask_leaves %}
<h3>Aucun congé mis en concours ou à échanger</h3>
{% endif %}

{% if gifts %}
<h3>Congés mis en concours</h3>
<div class="header-gift">
  <div>Date</div>
</div>
{% endif %}

{% for gift in gifts %}
<div class=gift>
  <div>{{ gift.1|date:"l d.m.y" }}<div>
  <div>
    <form action="delete/" method="post">
      {% csrf_token %}
      {{ gifts_form|get_item:gift.0 }}
      <input value="Supprimer" name="status" type="submit"></input>
    </form>
  </div>
</div>
<hr>
{% endfor %}

{% if accepted %}
<h3>Congés échangés</h3>
<div class="header">
  <div>Tour</div>
  <div>Date</div>
  <div>Horaire</div>
  <div>Collègue</div>
</div>
</br>
{% endif %}

{% for accept in accepted %}
<div class="form">
  <div>{{ accept.0 }}</div>
  <div>{{ accept.1|date:"l d.m.y" }}</div>
  <div>
    {{ accept.2|default_if_none:'-' }}</br>
    {{ accept.3|default_if_none:'-' }}
  </div>
  <div>
    {{ accept.4 }}</br>
    {{ accept.5 }}
  </div>
  <div>{{ accept.6|default_if_none:'-' }}</div>
  <div>
    {% if accept.7 %}
      <p>En échange : {{ accept.7|date:"l d.m.y" }}</p>
    {% else %}
      <p>À discuter</p>
    {% endif %}
  </div>
</div>
<hr>
{% endfor %}

{% if ask_leaves %}
<h3>Congés à échanger</h3>
<div class="header">
  <div>Date</div>
  <div>Horaire</div>
  <div>Congés</div>
</div>
</br>
{% endif %}

{% for data in ask_leaves %}
<div class="form" onclick="">
  <div class="date-info">
    </br>{{ data.1|date:"l d.m.y" }}
  </div>
  <div class="hour">
    {{ data.2|default_if_none:'-' }}</br>
    {{ data.3|default_if_none:'-' }}
  </div>
  <div class="form-dates">
      <form id="test" action="validate/" method="post" style="text-align: center">
      {% csrf_token %}
      {{ leaves|get_item:data.4 }}</br></br>
      <input value="{{ data.8 }}" name="id" type="hidden">
      <input value="Accept" name="status" type="submit"></input>
      <input value="Decline" name="status" type="submit"></input>
    </form>
  </div>
  <div class="i">
    <i class="fa-solid fa-info"></i>
  </div>
</div>
<hr>
{% endfor %}

{% endblock %}
